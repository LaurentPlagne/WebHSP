<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>d3-graphviz Network Graph</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
    <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
    <style>
        html, body {
            font-family: sans-serif;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #network-graph {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="network-graph"></div>

    <script type="text/javascript">
        const container = document.getElementById('network-graph');
        const dotString = %%DOT_STRING%%;

        try {
            if (dotString) {
                d3.select("#network-graph")
                    .graphviz()
                    .renderDot(dotString);
            }
        } catch (e) {
            console.error("Failed to render graph with d3-graphviz:", e);
            container.innerHTML = `<p style="color: red;">Error rendering graph: ${e.message}</p>`;
        }
    </script>
</body>
</html>
