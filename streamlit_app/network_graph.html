<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>d3-graphviz Network Graph</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@hpcc-js/wasm@2/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-graphviz@5/build/d3-graphviz.js"></script>
    <style>
        html, body {
            font-family: sans-serif;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #network-graph {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="network-graph"></div>

    <script type="text/javascript">
        window.addEventListener('DOMContentLoaded', (event) => {
            const container = document.getElementById('network-graph');
            const dotString = %%DOT_STRING%%;

            if (dotString) {
                try {
                    d3.select("#network-graph")
                        .graphviz({
                            useWorker: false,
                            width: "100%",
                            height: "100%",
                            fit: true
                        })
                        .renderDot(dotString);
                } catch (e) {
                    console.error("Failed to render graph with d3-graphviz:", e);
                    container.innerHTML = `<p style="color: red;">Error rendering graph: ${e.toString()}</p>`;
                }
            }
        });
    </script></body>
</html>
